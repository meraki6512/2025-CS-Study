# 1. 시스템 버스란?

> 컴퓨터 내부의 CPU, 메모리, I/O 디바이스 등을 물리적으로 연결해,
> **Data와 주소와 Control 신호를 주고받는 통로**로, 하드웨어 시스템 기반 구조다.
>
> </br>

## 구성

| Address 버스 | CPU가 접근할 메모리 주소 또는 I/O 장치 주소 | 단방향                 |
| ------------ | ------------------------------------------- | ---------------------- |
| Data 버스    | 명령어 및 데이터                            | 양방향                 |
| Control 버스 | R/W, 인터럽트 등 제어 신호                  | 양방향 (주로 CPU 중심) |

</br>

## 공유 자원 충돌

시스템 버스는 **공유 자원**이므로, 동시에 여러 컴포넌트가 접근하면 충돌이 발생한다.

→ 이 문제를 해결하기 위한 개념이 바로 **<u>Bus Arbitration</u>**!

</br></br>

# 2. Bus Arbitration (버스 중재)

> 버스 중재기는 여러 버스 마스터 중 어떤 장치가 버스를 사용할 지 결정한다.

- `Bus Master`: 버스를 요청하고 컨트롤할 수 있는 장치 (ex. CPU, DMA 등)
- `Bus Slave`: 요청된 동작에 응답하는 장치 (ex. 메모리, I/O 등)
- 신호 플래그 - `BREQ`, `BGNT`, `BBUSY`: 중재기와 마스터 간 사용하는 신호 플래그
  - `BREQ`: 요청
  - `BGNT`: 승인
  - `BBUSY`: 사용 중

</br>

## 버스 중재 방식

> 버스 중재기(Bus Arbiter)는
>
> - 여러 마스터의 `BREQ` 신호를 수신하고
> - 우선순위/방식/정책에 따라 하나의 마스터에게 `BGNT`를 부여하며
> - 충돌 없이 **단일 버스 자원을 공유**하게 하는 핵심 회로이다.

</br>

### 1. 병렬식

> 각 버스 마스터가 독립적으로 `BREQ`, `BGNT` 선을 가지고 요청 및 승인을 진행

- 빠르지만 <u>회로가 복잡하고 비용이 높음</u>

</br>

1. **고정** 우선 순위 방식

- **중앙 집중식**
  - 단일 중재기
  - 미리 정해진 우선 순위에 따라 높은 우선 순위의 마스터의 요청에 `BGNT` 신호를 부여
- **분산식**
  - 각 마스터에 중재기 내장
  - 서로의 `BBUSY` 상태를 확인하며, 자신보다 우선순위가 높은 마스터가 사용 중이면 대기
    → **Starvation** 문제 존재

</br>

2. **가변** 우선 순위 방식

- 우선 순위가 동적으로 변경되어 공정성을 확보하고 Starvation 방지한다.

* `Round Robin` (순환적)
* `FIFO` (큐; 요청 순서대로)
* `LRU` (Least Recently Used)

</br>

### 2. 직렬식

> `BGNT` 신호선을 마스터들 간에 **Daisy Chain**으로 연결

- 회로는 단순하지만, <u>우선순위가 물리적 위치로 고정</u>되어 변경이 어렵고, 순차적으로 접근해야 하므로 <u>지연 발생 가능</u>

1. **중앙 집중식**

- 단일 중재기가 `BGNT`를 보내며 마스터(의 사용 여부)를 순차적으로 검사함

2. **분산식**

- Daisy Chain 구조가 순환형으로 연결됨 (Circular Daisy Chain)
  - A → B → C → A 형태의 논리적 순환 구조
- 사용 완료한 마스터는 다음 마스터에게 `DBGNT` 신호 전달
- 분산 구조에서 자체 판단으로 사용 결정
  - 승인 신호를 받았을 때 요청 중이면 사용 후, 아니면 바로 다음 마스터로 전달

</br>

### 3. 폴링식

> 중재기가 주기적으로 마스터에게 버스 사용 여부를 질의

1. **H/W** Polling

- 중재기가 고정된 하드웨어 회로로 순차 검사
- 빠르고 간단하지만 우선순위 변경 어려움

2. **S/W** Polling

- 우선순위가 소프트웨어 루틴으로 결정됨
- 유연하지만 속도가 느리고 CPU 리소스 소모
